/*! mota-evaluador v0.1.0 | (c) 2019  | MIT License | https://github.com/Dejusticia/mota-evaluador-publico */
!(function(e){if("content"in e.createElement("template"))return!1;for(var t,r,a,n=e.getElementsByTagName("template"),i=n.length,l=0;l<i;++l){for((r=(t=n[l]).childNodes).length,a=e.createDocumentFragment();r[0];)a.appendChild(r[0]);t.content=a}})(document),(function(e,t,r){"use strict";var a,n,i,l,o,s,c,u,d,m,p=function(e){var r=e.rules;d.innerHTML="<b>URL:</b>"+e.meta.entityUrl;var c=e.meta.lastEvaluationDate;c=(c=c.replace("T"," - ")).substring(0,c.length-6),m.innerHTML="<b>Fecha de Evaluación:</b>"+c;for(var u=0;u<r.length;u++){var p=r[u],y=p.rule,g=p.grade,f="0",h=t.getElementById("template-results-criteria").content.cloneNode(!0),A=h.querySelector(".results-criteria-grade meter"),b=h.querySelector(".results-criteria-grade label"),v=h.querySelector(".results-criteria");if("AAA"===g?f=100:"AA"===g?f=50:"A"===g&&(f=20),h.querySelector("summary").innerText=p.title,h.querySelector("details p").innerHTML="<p>"+p.shortDescription+' <a href="#" class="more-link">Más Informaciones.</a></p>',h.querySelector("td.results-criteria-type").innerText=p.type,v.setAttribute("id","criteria-"+y),b.innerText=g,b.setAttribute("for","grade-"+y),A.setAttribute("value",f),A.setAttribute("id","grade-"+y),A.setAttribute("name","grade-"+y),A.innerText=f,"recommendation"===p.type)switch(g){case"AAA":i.appendChild(h);break;case"AA":n.appendChild(h);break;default:a.appendChild(h)}else switch(g){case"AAA":s.appendChild(h);break;case"AA":o.appendChild(h);break;default:l.appendChild(h)}}};a=t.querySelector(".legal-obligations.unsatisfactory"),n=t.querySelector(".legal-obligations.partial"),i=t.querySelector(".legal-obligations.satisfactory"),l=t.querySelector(".recommendations.unsatisfactory"),o=t.querySelector(".recommendations.partial"),s=t.querySelector(".recommendations.satisfactory"),c=t.getElementById("evaluate-form"),t.getElementById("evaluate-url"),d=t.getElementById("results-summary-url"),m=t.getElementById("results-summary-date");t.addEventListener("submit",(function(e){e.preventDefault(),c===e.target&&atomic("http://localhost:3000/reports/report-corteconstitucional-gov-co.json",{responseType:"json"}).then((function(e){return u=e.data,p(u),u})).catch((function(e){console.error("error code",e.status),console.error("error description",e.statusText)}))}),!1)})(window,document);