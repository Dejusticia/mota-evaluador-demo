/*! mota-evaluador v0.1.0 | (c) 2019  | MIT License | https://github.com/Dejusticia/mota-evaluador-publico */
!(function(e,r){"function"==typeof define&&define.amd?define([],(function(){return r(e)})):"object"==typeof exports?module.exports=r(e):e.Gumshoe=r(e)})("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(e){"use strict";var r,t,n,s,a,o,i,c,l,u,d,m,p=function(e){var r=(function(e){var r,t=parseUri(sanitizeHTML(String(e)));if(-1===t.host.indexOf("gov.co"))throw new Error("This URI is invalid");return r=t.host.replace(/\./g,"-"),{host:t.host,basename:r,reportBasename:"report-"+r}})(e);i.forEach((function(e,r){e.innerHTML='<div role="progressbar" class="mdc-linear-progress mdc-linear-progress--indeterminate"><div class="mdc-linear-progress__buffering-dots"></div><div class="mdc-linear-progress__buffer"></div><div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar"><span class="mdc-linear-progress__bar-inner"></span></div><div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar"><span class="mdc-linear-progress__bar-inner"></span></div></div>'})),atomic("http://localhost:3000/reports/"+r.reportBasename+".json").then((function(e){return u=e.data,b(u),u})).catch((function(e){throw console.error("error code",e.status),console.error("error description",e.statusText),new Error("This request returned an error with the code:\n"+e.status)}))},g=function(e,i){if("recommendation"===i.type)switch(i.grade){case"AAA":o.prepend(e);break;case"AA":a.prepend(e);break;default:s.prepend(e)}else switch(i.grade){case"AAA":n.prepend(e);break;case"AA":t.prepend(e);break;default:r.prepend(e)}},f=function(e,r){var t=r.ruleId,n=e.querySelector(".results-criteria-grade meter"),s=e.querySelector(".results-criteria-grade label"),a=e.querySelector(".results-criteria");return e.querySelector("summary").innerText=r.title,e.querySelector("details p").innerHTML="<p>"+r.shortDescription+' <a href="#" class="more-link">Más Informaciones.</a></p>',a.setAttribute("id","criteria-"+t),s.innerText=r.grade,s.setAttribute("for","grade-"+t),n.setAttribute("value",r.gradePoints),n.setAttribute("id","grade-"+t),n.setAttribute("name","grade-"+t),n.innerText=r.gradePoints,e},b=function(e){var r,t=e.rules,n=e.meta.lastEvaluationDate;d.innerHTML="",m.innerHTML="";for(var s=0;s<t.length;s++){var a=t[s],o=(a.grade,document.getElementById("template-results-criteria").content.cloneNode(!0));o=f(o,a),g(o,a)}d.innerHTML="<b>URL:</b>"+e.meta.entityUrl,m.innerHTML="<b>Fecha de Evaluación:</b>"+(r=(r=(r=n).replace("T"," - ")).substring(0,r.length-6))};r=document.querySelector(".legal-obligations.unsatisfactory .results-content"),t=document.querySelector(".legal-obligations.partial .results-content"),n=document.querySelector(".legal-obligations.satisfactory .results-content"),s=document.querySelector(".recommendations.unsatisfactory .results-content"),a=document.querySelector(".recommendations.partial .results-content"),o=document.querySelector(".recommendations.satisfactory .results-content"),c=document.getElementById("evaluate-form"),l=document.getElementById("evaluate-url"),d=document.getElementById("results-summary-url"),m=document.getElementById("results-summary-date"),i=document.querySelectorAll(".results-content"),document.addEventListener("submit",(function(e){e.preventDefault(),c===e.target&&(console.log(l.value),p(l.value))}),!1)}));