/*! mota-evaluador v0.1.0 | (c) 2019  | MIT License | https://github.com/Dejusticia/mota-evaluador-publico */
!(function(e,r){"function"==typeof define&&define.amd?define([],(function(){return r(e)})):"object"==typeof exports?module.exports=r(e):e.Gumshoe=r(e)})("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(e){"use strict";var r,t,n,s,a,o,i,c,l,d,u,m=function(e,i){if("recommendation"===i.type)switch(i.grade){case"AAA":n.prepend(e);break;case"AA":t.prepend(e);break;default:r.prepend(e)}else switch(i.grade){case"AAA":o.prepend(e);break;case"AA":a.prepend(e);break;default:s.prepend(e)}},p=function(e,r){var t=r.ruleId,n=e.querySelector(".results-criteria-grade meter"),s=e.querySelector(".results-criteria-grade label"),a=e.querySelector(".results-criteria");return e.querySelector("summary").innerText=r.title,e.querySelector("details p").innerHTML="<p>"+r.shortDescription+' <a href="#" class="more-link">Más Informaciones.</a></p>',a.setAttribute("id","criteria-"+t),s.innerText=r.grade,s.setAttribute("for","grade-"+t),n.setAttribute("value",r.gradePoints),n.setAttribute("id","grade-"+t),n.setAttribute("name","grade-"+t),n.innerText=r.gradePoints,e},g=function(e){var r,t=e.rules,n=e.meta.lastEvaluationDate;i.forEach((function(e,r){e.innerHTML='<div role="progressbar" class="mdc-linear-progress mdc-linear-progress--indeterminate"><div class="mdc-linear-progress__buffering-dots"></div><div class="mdc-linear-progress__buffer"></div><div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar"><span class="mdc-linear-progress__bar-inner"></span></div><div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar"><span class="mdc-linear-progress__bar-inner"></span></div></div>'})),d.innerHTML="",u.innerHTML="";for(var s=0;s<t.length;s++){var a=t[s],o=(a.grade,document.getElementById("template-results-criteria").content.cloneNode(!0));o=p(o,a),m(o,a)}d.innerHTML="<b>URL:</b>"+e.meta.entityUrl,u.innerHTML="<b>Fecha de Evaluación:</b>"+(r=(r=(r=n).replace("T"," - ")).substring(0,r.length-6))};r=document.querySelector(".legal-obligations.unsatisfactory .results-content"),t=document.querySelector(".legal-obligations.partial .results-content"),n=document.querySelector(".legal-obligations.satisfactory .results-content"),s=document.querySelector(".recommendations.unsatisfactory .results-content"),a=document.querySelector(".recommendations.partial .results-content"),o=document.querySelector(".recommendations.satisfactory .results-content"),c=document.getElementById("evaluate-form"),document.getElementById("evaluate-url"),d=document.getElementById("results-summary-url"),u=document.getElementById("results-summary-date"),i=document.querySelectorAll(".results-content"),document.addEventListener("submit",(function(e){e.preventDefault(),c===e.target&&atomic("http://localhost:3000/reports/report-corteconstitucional-gov-co.json",{responseType:"json"}).then((function(e){return l=e.data,g(l),l})).catch((function(e){console.error("error code",e.status),console.error("error description",e.statusText)}))}),!1)}));